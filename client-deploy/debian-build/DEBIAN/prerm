#!/bin/bash
set -e

# Stoppe laufende Instanzen - NUR den Binary-Prozess, nicht dpkg!
# -x = exact match auf Prozessname (nicht Kommandozeile)
if pgrep -x "ailinux-client" > /dev/null 2>&1; then
    pkill -x "ailinux-client" 2>/dev/null || true
    sleep 1
fi

# Fallback: Suche nach dem Binary-Pfad
if pgrep -f "^/usr/bin/ailinux-client" > /dev/null 2>&1; then
    pkill -f "^/usr/bin/ailinux-client" 2>/dev/null || true
    sleep 1
fi

exit 0
